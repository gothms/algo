//ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums ï¼Œä¸‹æ ‡ä»Ž 0 å¼€å§‹ã€‚
//
// å¦‚æžœåœ¨ä¸‹æ ‡ i å¤„ åˆ†å‰² æ•°ç»„ï¼Œå…¶ä¸­ 0 <= i <= n - 2 ï¼Œä½¿å‰ i + 1 ä¸ªå…ƒç´ çš„ä¹˜ç§¯å’Œå‰©ä½™å…ƒç´ çš„ä¹˜ç§¯äº’è´¨ï¼Œåˆ™è®¤ä¸ºè¯¥åˆ†å‰² æœ‰æ•ˆ ã€‚
//
//
// ä¾‹å¦‚ï¼Œå¦‚æžœ nums = [2, 3, 3] ï¼Œé‚£ä¹ˆåœ¨ä¸‹æ ‡ i = 0 å¤„çš„åˆ†å‰²æœ‰æ•ˆï¼Œå› ä¸º 2 å’Œ 9 äº’è´¨ï¼Œè€Œåœ¨ä¸‹æ ‡ i = 1 å¤„çš„åˆ†å‰²æ— æ•ˆï¼Œå› ä¸º 6
// å’Œ 3 ä¸äº’è´¨ã€‚åœ¨ä¸‹æ ‡ i = 2 å¤„çš„åˆ†å‰²ä¹Ÿæ— æ•ˆï¼Œå› ä¸º i == n - 1 ã€‚
//
//
// è¿”å›žå¯ä»¥æœ‰æ•ˆåˆ†å‰²æ•°ç»„çš„æœ€å°ä¸‹æ ‡ i ï¼Œå¦‚æžœä¸å­˜åœ¨æœ‰æ•ˆåˆ†å‰²ï¼Œåˆ™è¿”å›ž -1 ã€‚
//
// å½“ä¸”ä»…å½“ gcd(val1, val2) == 1 æˆç«‹æ—¶ï¼Œval1 å’Œ val2 è¿™ä¸¤ä¸ªå€¼æ‰æ˜¯äº’è´¨çš„ï¼Œå…¶ä¸­ gcd(val1, val2) è¡¨ç¤º
//val1 å’Œ val2 çš„æœ€å¤§å…¬çº¦æ•°ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//
//
//è¾“å…¥ï¼šnums = [4,7,8,15,3,5]
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šä¸Šè¡¨å±•ç¤ºäº†æ¯ä¸ªä¸‹æ ‡ i å¤„çš„å‰ i + 1 ä¸ªå…ƒç´ çš„ä¹˜ç§¯ã€å‰©ä½™å…ƒç´ çš„ä¹˜ç§¯å’Œå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°çš„å€¼ã€‚
//å”¯ä¸€ä¸€ä¸ªæœ‰æ•ˆåˆ†å‰²ä½äºŽä¸‹æ ‡ 2 ã€‚
//
// ç¤ºä¾‹ 2ï¼š
//
//
//
//
//è¾“å…¥ï¼šnums = [4,7,15,8,3,5]
//è¾“å‡ºï¼š-1
//è§£é‡Šï¼šä¸Šè¡¨å±•ç¤ºäº†æ¯ä¸ªä¸‹æ ‡ i å¤„çš„å‰ i + 1 ä¸ªå…ƒç´ çš„ä¹˜ç§¯ã€å‰©ä½™å…ƒç´ çš„ä¹˜ç§¯å’Œå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°çš„å€¼ã€‚
//ä¸å­˜åœ¨æœ‰æ•ˆåˆ†å‰²ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// n == nums.length
// 1 <= n <= 10â´
// 1 <= nums[i] <= 10â¶
//
//
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ•°å­¦ æ•°è®º ðŸ‘ 34 ðŸ‘Ž 0

package main

import "fmt"

func main() {
	a, b := 42*13*2*6, 42*5*7*11*23
	for b != 0 {
		a, b = b, a%b
	}
	fmt.Println(a, b)
	nums := []int{4, 7, 15, 8, 3, 5}
	split := findValidSplit(nums)
	fmt.Println(split)
}

// leetcode submit region begin(Prohibit modification and deletion)
func findValidSplit(nums []int) int {
	n := len(nums)
	memo, far := make(map[int]int), make([]int, n)
	record := func(i, p int) { // å…³é”®é€»è¾‘
		if f, ok := memo[p]; ok {
			far[f] = i // è´¨å› å­ p ç¬¬ä¸€æ¬¡å‡ºçŽ°ä¸º fï¼Œæœ€åŽä¸€æ¬¡å‡ºçŽ°ä¸º i
			// f è®°å½•çš„æœ€è¿œ i ä¼šæ›´æ–°å¹¶è¦†ç›–
			// åŒºé—´ [f, i) ä¸å¯èƒ½æ˜¯ç­”æ¡ˆ
		} else {
			memo[p] = i // è´¨å› å­ p ç¬¬ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®ä¸º i
		}
	}
	for i, val := range nums { // æ±‚å‡ºè´¨å› å­
		v := val
		for _, p := range prime2584 {
			if p*p > v {
				break
			}
			if v%p == 0 {
				record(i, p)
				for v /= p; v%p == 0; v /= p {
				}
			}
		}
		if v > 1 {
			record(i, v)
		}
	}
	maxFar := 0 // é‡å¤è´¨å› å­çš„æœ€è¿œä½ç½®
	for i, f := range far {
		if i > maxFar { // maxFar ä¸ºåˆ†å‰²ç‚¹
			return maxFar
		}
		maxFar = max(maxFar, f) // æ›´æ–° maxFar
	}
	return -1
}

var prime2584 []int

func init() { // æ±‚å‡ºè´¨æ•°
	const N = 1e6
	prime := make([]bool, N+1)
	for i := 2; i <= N; i++ {
		if !prime[i] {
			for j := i << 1; j <= N; j += i {
				prime[j] = true
			}
			prime2584 = append(prime2584, i)
		}
	}
}

//leetcode submit region end(Prohibit modification and deletion)
