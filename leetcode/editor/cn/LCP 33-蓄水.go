//ç»™å®š N ä¸ªæ— é™å®¹é‡ä¸”åˆå§‹å‡ç©ºçš„æ°´ç¼¸ï¼Œæ¯ä¸ªæ°´ç¼¸é…æœ‰ä¸€ä¸ªæ°´æ¡¶ç”¨æ¥æ‰“æ°´ï¼Œç¬¬ `i` ä¸ªæ°´ç¼¸é…å¤‡çš„æ°´æ¡¶å®¹é‡è®°ä½œ `bucket[i]`ã€‚å°æ‰£æœ‰ä»¥ä¸‹ä¸¤ç§æ“ä½œï¼š
//- å‡çº§æ°´æ¡¶ï¼šé€‰æ‹©ä»»æ„ä¸€ä¸ªæ°´æ¡¶ï¼Œä½¿å…¶å®¹é‡å¢åŠ ä¸º `bucket[i]+1`
//- è“„æ°´ï¼šå°†å…¨éƒ¨æ°´æ¡¶æ¥æ»¡æ°´ï¼Œå€’å…¥å„è‡ªå¯¹åº”çš„æ°´ç¼¸
//
//æ¯ä¸ªæ°´ç¼¸å¯¹åº”æœ€ä½è“„æ°´é‡è®°ä½œ `vat[i]`ï¼Œè¿”å›å°æ‰£è‡³å°‘éœ€è¦å¤šå°‘æ¬¡æ“ä½œå¯ä»¥å®Œæˆæ‰€æœ‰æ°´ç¼¸è“„æ°´è¦æ±‚ã€‚
//
//æ³¨æ„ï¼šå®é™…è“„æ°´é‡ **è¾¾åˆ°æˆ–è¶…è¿‡** æœ€ä½è“„æ°´é‡ï¼Œå³å®Œæˆè“„æ°´è¦æ±‚ã€‚
//
//**ç¤ºä¾‹ 1ï¼š**
//
//> è¾“å…¥ï¼š`bucket = [1,3], vat = [6,8]`
//>
//> è¾“å‡ºï¼š`4`
//>
//> è§£é‡Šï¼š
//> ç¬¬ 1 æ¬¡æ“ä½œå‡çº§ bucket[0]ï¼›
//> ç¬¬ 2 ~ 4 æ¬¡æ“ä½œå‡é€‰æ‹©è“„æ°´ï¼Œå³å¯å®Œæˆè“„æ°´è¦æ±‚ã€‚
//> ![vat1.gif](https://pic.leetcode-cn.com/1616122992-RkDxoL-vat1.gif)
//
//**ç¤ºä¾‹ 2ï¼š**
//
//> è¾“å…¥ï¼š`bucket = [9,0,1], vat = [0,2,2]`
//>
//> è¾“å‡ºï¼š`3`
//>
//> è§£é‡Šï¼š
//> ç¬¬ 1 æ¬¡æ“ä½œå‡é€‰æ‹©å‡çº§ bucket[1]
//> ç¬¬ 2~3 æ¬¡æ“ä½œé€‰æ‹©è“„æ°´ï¼Œå³å¯å®Œæˆè“„æ°´è¦æ±‚ã€‚
//
//**æç¤ºï¼š**
//- `1 <= bucket.length == vat.length <= 100`
//- `0 <= bucket[i], vat[i] <= 10^4`
//
// Related Topics è´ªå¿ƒ æ•°ç»„ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ ğŸ‘ 88 ğŸ‘ 0

package main

import (
	"container/heap"
	"fmt"
)

func main() {
	bucket := []int{1, 3}
	vat := []int{6, 8}
	bucket = []int{0}
	vat = []int{0}
	//bucket = []int{3, 2, 5}
	//vat = []int{0, 0, 0}
	//bucket = []int{9, 0, 1}
	//vat = []int{0, 2, 2}
	//bucket = []int{16, 29, 42, 70, 42, 9}
	//vat = []int{89, 44, 50, 90, 94, 91} // 11
	// 127
	//bucket = []int{3710, 6067, 2993, 70, 2340, 2748, 9385, 3027, 3456, 5246, 9739, 1220, 9539, 9074, 4729, 7051, 8462, 6908, 3649, 9996, 8890, 2980, 4350, 7350, 6344, 6759, 4420, 269, 9341, 648, 7737, 8133, 3717, 2766, 5807, 4338, 2077, 5775, 4905, 7262, 1258, 613, 3837, 3475, 437, 3739, 9814, 4790, 2075, 7722, 3290, 5685, 3499, 6992, 4421, 934, 6004, 5763, 3463, 6138, 8818, 445, 4778, 4979, 126, 3969, 2994, 87, 3739, 8582, 9559, 8326, 9132, 257, 8928, 9147, 1615, 4665, 9828, 3925, 6435, 5326, 836, 519, 298, 600, 5503, 273, 9580, 5383, 8966, 4810, 1386, 7207, 8060, 678, 8837, 6946, 1210, 945}
	//vat = []int{6304, 6509, 4276, 9645, 6455, 8167, 9667, 4385, 8872, 7889, 9936, 4413, 9922, 9894, 8065, 7627, 9225, 9907, 7055, 9996, 9439, 3351, 9317, 8363, 9383, 6850, 4621, 5389, 9508, 3391, 9650, 8363, 8719, 5594, 8770, 5403, 7107, 9941, 9254, 9355, 4614, 4640, 4896, 8759, 4397, 8441, 9870, 9906, 2396, 8092, 6939, 9432, 8182, 9090, 8029, 4930, 7772, 7066, 7279, 7778, 9529, 2947, 6552, 6930, 5260, 8470, 8478, 1371, 9453, 9767, 9888, 9964, 9960, 3990, 9391, 9377, 3063, 5374, 9880, 7684, 7864, 7078, 2622, 3754, 617, 9773, 9415, 8026, 9883, 5735, 9233, 6715, 9105, 7932, 9178, 1081, 9340, 7284, 6621, 1965}
	// 138
	bucket = []int{9988, 5017, 5130, 2445, 9896, 9151, 3625, 7801, 608, 3283, 1386, 979, 5209, 4182, 8234, 9870, 8714, 6435, 3800, 956, 4006, 5620, 7474, 1205, 6993, 3320, 1201, 7593, 905, 3816, 4522, 4560, 8027, 8219, 6686, 3779, 2141, 1240, 6504, 6612, 6921, 7329, 8145, 5745, 7652, 4340, 7933, 6246, 5157, 9447, 107, 9665, 3653, 2978, 9832, 4945, 4312, 2199, 449, 8432, 3230, 8163, 800, 6547, 1110, 1194, 9384, 632, 3275, 1229, 7230, 8643, 7613, 8256, 5043, 1288, 3088, 8997, 4554, 4755, 7433, 8146, 9722, 3469, 8863, 5831, 7816, 5058, 4316, 7946, 8402, 975, 2450, 4958, 9811, 9336, 21, 9309, 8999, 56}
	vat = []int{9991, 6973, 7192, 9876, 9910, 9549, 3700, 8814, 1308, 9981, 9234, 7292, 7732, 8458, 8441, 9939, 9621, 7285, 7452, 2718, 6589, 7555, 8788, 3202, 7832, 4781, 8798, 9299, 2112, 9963, 8755, 7240, 9217, 8587, 6782, 9703, 8954, 3759, 6907, 7218, 7333, 8020, 8323, 5750, 9510, 8571, 8664, 8510, 9363, 9741, 8643, 9825, 4227, 8530, 9961, 8511, 8949, 7486, 9086, 9690, 5316, 9581, 9314, 8817, 7234, 8998, 9485, 5394, 7365, 1501, 7984, 9802, 9778, 8314, 7482, 7117, 5117, 9609, 8732, 9728, 9330, 8800, 9775, 6210, 8966, 7700, 8802, 7607, 8950, 9730, 9855, 1231, 5228, 5329, 9982, 9532, 3230, 9951, 9034, 8299}
	cnt := storeWater(bucket, vat)
	fmt.Println(cnt)

	//n := 8299
	//x := 56
	//for i := 0; i < 50; i++ {
	//	y := float64(n)/float64(x+i) + float64(i)
	//	fmt.Println(i, y)
	//}
	//
	//fmt.Println(math.Floor(5.000))
	//fmt.Println(math.Ceil(5.000))
	//fmt.Println(math.Ceil(5.001))
}

/*
æ€è·¯ï¼šå †
	1.è®¾ç¬¬ i ä¸ªæ°´æ¡¶ï¼Œæ»¡è¶³ç¬¬ i ä¸ªæ°´ç¼¸è“„æ°´é‡ï¼Œéœ€è¦è£…æ°´ b[i]/vat[i] = cnt[i] æ¬¡
		é‚£ä¹ˆï¼Œæ€»è£…æ°´æ¬¡æ•°å³ä¸º cnt[i]ï¼Œå³è£…æ°´æ¬¡æ•°åªå—é™äº å½“å‰æœ€å¤§cnt[i]
			ä¸¾ä¾‹ï¼šb=[8,1,3,5] vat=[8,4,7,9]
			é‚£ä¹ˆï¼šcnt=[1,4,3,2]
			å³ç´¢å¼•ä¸º 1 æ—¶ï¼Œb=1 vat=4 æ—¶ï¼Œéœ€è¦è£… 4 æ¬¡æ°´ï¼Œæ¯ä¸ªb[i]éƒ½èƒ½æ»¡è¶³æ¯ä¸ªvat[i]
		ä½†æ˜¯å½“ b=1 å¢åŠ å®¹é‡ä¸º b=2 æ—¶ï¼Œb=2 vat=4 éœ€è¦è£…æ°´ 2 æ¬¡
			è€Œç´¢å¼•ä¸º 2 çš„æƒ…å†µæ˜¯ï¼Œb=3 vat=7 éœ€è¦ 3 æ¬¡
			å³ï¼Œæ­¤æ—¶éœ€è¦è£…æ°´ 3 æ¬¡ï¼Œæ‰èƒ½ä½¿æ¯ä¸ªb[i]éƒ½èƒ½æ»¡è¶³æ¯ä¸ªvat[i]
		é‚£ä¹ˆä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„æ¥åŠ¨æ€è·å– å½“å‰æœ€å¤§è£…æ°´æ¬¡æ•°ï¼Ÿ
	2.ä¸Šé¢è¿™ä¸ªä¾‹å­å°±æ˜¯ç”¨æ¥è¯´æ˜ï¼Œé‡‡ç”¨ å¤§é¡¶å †ï¼Œå®ç°ä¸€ä¸ª ä¼˜å…ˆé˜Ÿåˆ— æ¥åŠ¨æ€è·å– å½“å‰æœ€å¤§è£…æ°´æ¬¡æ•°
		å°† b[i] vat[i] çš„æ¯å¯¹å€¼ï¼Œå­˜å…¥å †ï¼Œvat[i]/b[i] çš„å€¼ï¼Œå³ä¸º b[i] vat[i] éœ€è¦çš„è£…æ°´æ¬¡æ•° cnt[i]
			åˆ™ï¼Œå°† vat[i]/b[i] æœ€å¤§å€¼ï¼Œä½œä¸ºå †é¡¶å…ƒç´  heap[0]
			å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å­˜ vat[i]/b[i] iï¼Œè¿™æ ·åœ¨å †åŒ–æ—¶ï¼Œå°±ä¸ç”¨å†è®¡ç®— vat[i]/b[i]
		æ¯æ¬¡å¯¹ heap[0] ä¸­ b[i] è¿›è¡Œå®¹é‡å‡çº§ b[i]=b[i]+1
			å†å¯¹ vat[i]/(b[i]+1) åšå †åŒ–ï¼Œå¦‚æ­¤å¾€å¤è¿™ä¸ªè¿‡ç¨‹
			é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­ï¼Œä½•æ—¶ heap[0] ä¸ç»§ç»­è¿™ä¸ªè¿‡ç¨‹ï¼Œèƒ½æ»¡è¶³é¢˜æ„æ‰€æ±‚å‘¢ï¼Ÿ
	3.å‡è®¾ heap[0] å½“å‰çš„å€¼ä¸º b[i] vat[i]
		ç®€å•è¯´å°±æ˜¯ï¼Œå½“ vat[i]/b[i] < vat[i]/(b[i]+1) + 1 æ—¶ï¼Œå³å¯åœæ­¢ï¼ˆè¿™é‡Œéƒ½å…ˆä¸è€ƒè™‘ =ï¼‰
		ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ
			è®¾ vat[i]=nï¼Œb[i]=xï¼Œb[i] å‡çº§äº† a æ¬¡ä¸º b[i]+a
			é‚£ä¹ˆ n/(x+a) + a å³ä¸º b[i] å‡çº§ a æ¬¡åï¼Œä¸€å…±çš„æ“ä½œæ¬¡æ•°ï¼ˆè£…æ°´æ¬¡æ•°+å‡çº§æ¬¡æ•°ï¼‰
			ç®€åŒ–ä¸º n/(x+a) + (x+a) - a
			å¯çŸ¥ x+a = æ ¹å·n æ—¶ï¼Œn/(x+a) + a å–å¾—æœ€å°å€¼
		å½“å‡çº§æ¬¡æ•° å°äºa æˆ– å¤§äºa æ—¶ï¼Œéƒ½æœ‰ vat[i]/b[i] > vat[i]/(b[i]+1) + 1
å‘ï¼š
	1.æ€è·¯3.ä¸­ï¼Œè®¡ç®— vat[i]/b[i] çš„å€¼å¦‚æœå–æ•´æ•°ï¼Œé‚£ä¹ˆä¼šç²¾åº¦ä¸¢å¤±ï¼Œé‚£ä¹ˆç»§ç»­å †åŒ–çš„æ¡ä»¶ä¸ºï¼š
		æ•´æ•°æ—¶ï¼švat[i]/b[i] >= vat[i]/(b[i]+1) + 1
		æµ®ç‚¹æ•°æ—¶ï¼švat[i]/b[i] > vat[i]/(b[i]+1) + 1
			æ•´æ•°å–å€¼çš„ç¼ºç‚¹æ˜¯ï¼Œå †åŒ–çš„æ¬¡æ•°ä¼šå¢å¤š
	2.vat[i]/b[i] å–æ•´æ•°ï¼Œä¸”ä½™æ•°ä¸º 0 æ—¶
		ä¸¤ç§å†™æ³•ï¼š
			(vat[i]-1)/b[i] + 1ï¼šç¼ºç‚¹æ˜¯ vat[i]=0 å‡ºç° bug
			(vat[i]+b[i]-1)/b[i]
	3.è€ƒè™‘ b[i] = 0 çš„æƒ…å†µï¼šå…ˆå‡çº§ï¼Œb[i]=1
		è€ƒè™‘ vat[i] = 0 çš„æƒ…å†µï¼šè¯¥å¯¹æ•°æ®ä½œåºŸ
	4.å‘1.ä¸­ï¼Œæ˜¯å¯¹ b[i] åš +1 å¤„ç†çš„æ€è·¯ï¼Œè¿˜å¯ä»¥è€ƒè™‘å¯¹ vat[i]/b[i] åš +1 å¤„ç†çš„æ€è·¯
		å³ä¿è¯å‡çº§ b[i] åï¼Œè¯¥æ°´ç¼¸çš„è£…æ°´æ¬¡æ•°è‡³å°‘ -1
		é‚£ä¹ˆä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿä¸ºä»€ä¹ˆè¯´é‡‡ç”¨ b[i]+1 æ›´å¥½å‘¢ï¼Ÿè¯·ç»“åˆæ€è·¯3.åˆ†æ
*/
//leetcode submit region begin(Prohibit modification and deletion)
func storeWater(bucket []int, vat []int) int {
	minVal := func(a, b int) int {
		if a < b {
			return a
		}
		return b
	}
	h, cnt, n := pairHeap{}, 0, len(bucket)
	for i := 0; i < n; i++ {
		if bucket[i] == 0 {
			cnt++
			bucket[i] = 1
			//heap.Push(&h, [2]int{1, vat[i]})	// é¿å… [0] [0] æƒ…å†µ
		}
		if vat[i] > 0 {
			heap.Push(&h, [2]int{bucket[i], vat[i]})
		}
	}
	if h.Len() == 0 {
		return 0
	}
	min := cnt + (h[0][1]-1)/h[0][0] + 1 // åˆå§‹åŒ– minï¼Œé˜²æ­¢ä¸è¿›å¾ªç¯
	//for (h[0][1]-1)/h[0][0] >= (h[0][1]-1)/(h[0][0]+1)+1 { // å†™æ³•ä¸€ï¼šå †åŒ–æ¬¡æ•°æ›´å¤š
	for float64(h[0][1])/float64(h[0][0]) > float64(h[0][1])/float64(h[0][0]+1)+1 { // å†™æ³•äºŒ
		cnt++
		h[0][0]++ // éœ€è¦åœ¨å †åŒ–ä¹‹å‰
		heap.Fix(&h, 0)
		min = minVal(min, cnt+(h[0][1]-1)/h[0][0]+1) // å¿…é¡»å®æ—¶è®°å½•ï¼Œä¸”åœ¨å †åŒ–ä¹‹å
	}
	return min
}

//type pair struct {
//	quotient float64
//	i        int
//}
//type pairHeap []pair
//
//func (h pairHeap) Len() int {
//	return len(h)
//}
//func (h pairHeap) Less(i, j int) bool {
//	return h[i].quotient > h[j].quotient
//}
//func (h pairHeap) Swap(i, j int) {
//	h[i], h[j] = h[j], h[i]
//}
//func (h *pairHeap) Push(x interface{}) {
//	*h = append(*h, x.(pair))
//}
//func (h *pairHeap) Pop() interface{} {
//	x := (*h)[len(*h)-1]
//	*h = (*h)[:len(*h)-1]
//	return x
//}

type pairHeap [][2]int

func (h pairHeap) Len() int {
	return len(h)
}
func (h pairHeap) Less(i, j int) bool {
	// ä¿æŒç²¾åº¦
	return float64(h[i][1])/float64(h[i][0]) > float64(h[j][1])/float64(h[j][0])
}
func (h pairHeap) Swap(i, j int) {
	h[i], h[j] = h[j], h[i]
}
func (h *pairHeap) Push(x interface{}) {
	*h = append(*h, x.([2]int))
}
func (h *pairHeap) Pop() interface{} {
	x := (*h)[len(*h)-1]
	*h = (*h)[:len(*h)-1]
	return x
}

//leetcode submit region end(Prohibit modification and deletion)
