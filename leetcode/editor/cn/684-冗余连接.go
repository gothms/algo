//æ ‘å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªè¿é€šä¸” æ— ç¯ çš„ æ— å‘ å›¾ã€‚
//
// ç»™å®šå¾€ä¸€æ£µ n ä¸ªèŠ‚ç‚¹ (èŠ‚ç‚¹å€¼ 1ï½n) çš„æ ‘ä¸­æ·»åŠ ä¸€æ¡è¾¹åçš„å›¾ã€‚æ·»åŠ çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åŒ…å«åœ¨ 1 åˆ° n ä¸­é—´ï¼Œä¸”è¿™æ¡é™„åŠ çš„è¾¹ä¸å±äºæ ‘ä¸­å·²å­˜åœ¨çš„è¾¹ã€‚å›¾çš„ä¿¡
//æ¯è®°å½•äºé•¿åº¦ä¸º n çš„äºŒç»´æ•°ç»„ edges ï¼Œedges[i] = [ai, bi] è¡¨ç¤ºå›¾ä¸­åœ¨ ai å’Œ bi ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚
//
// è¯·æ‰¾å‡ºä¸€æ¡å¯ä»¥åˆ å»çš„è¾¹ï¼Œåˆ é™¤åå¯ä½¿å¾—å‰©ä½™éƒ¨åˆ†æ˜¯ä¸€ä¸ªæœ‰ç€ n ä¸ªèŠ‚ç‚¹çš„æ ‘ã€‚å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œåˆ™è¿”å›æ•°ç»„ edges ä¸­æœ€åå‡ºç°çš„é‚£ä¸ªã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//
//
//è¾“å…¥: edges = [[1,2], [1,3], [2,3]]
//è¾“å‡º: [2,3]
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//
//
//è¾“å…¥: edges = [[1,2], [2,3], [3,4], [1,4], [1,5]]
//è¾“å‡º: [1,4]
//
//
//
//
// æç¤º:
//
//
// n == edges.length
// 3 <= n <= 1000
// edges[i].length == 2
// 1 <= ai < bi <= edges.length
// ai != bi
// edges ä¸­æ— é‡å¤å…ƒç´ 
// ç»™å®šçš„å›¾æ˜¯è¿é€šçš„
//
//
// Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ å¹¶æŸ¥é›† å›¾ ğŸ‘ 576 ğŸ‘ 0

package main

import "fmt"

func main() {
	// [1,3]
	edges := [][]int{{1, 4}, {3, 4}, {1, 3}, {1, 2}, {4, 5}}
	// [2,8]
	edges = [][]int{{2, 7}, {7, 8}, {3, 6}, {2, 5}, {6, 8}, {4, 8}, {2, 8}, {1, 8}, {7, 10}, {3, 9}}
	connection := findRedundantConnection(edges)
	fmt.Println(connection)
}

/*
æ€è·¯ï¼šdfs
	1.æ ¹æ®é¢˜æ„ï¼Œæ ‘æœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œn-1 æ¡è¾¹
		åˆ™ä»»æ„æ·»åŠ ä¸€æ¡è¾¹æ—¶ï¼Œä¼šå½¢æˆä¸€ä¸ªç¯ï¼Œå¹¶ä¸”ä»…ä¸€ä¸ª
	2.å°è¯• dfs æ‰¾å‡ºæ‰¾ä¸ªç¯ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹
		é‚£ä¹ˆä»»æ„å»æ‰è¿™ä¸ªç¯ä¸­çš„ä¸€æ¡è¾¹ï¼Œå°±ä¼šå†æ¬¡æ¢å¤ä¸ºæ ‘
	3.å…³é”®ç‚¹ï¼šæ‰¾å‡ºç¯ä¸­çš„èŠ‚ç‚¹
		å½“dfsæ—¶é‡åˆ°å·²ç»éå†è¿‡çš„èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ç¯ï¼Œæ­¤æ—¶åœ¨é€’å½’ä¸­è¿”å›è¿™ä¸ªèŠ‚ç‚¹
		å½“dfsçš„é€’å½’ä¸­â€œå½’â€åˆ°è¿™ä¸ªèŠ‚ç‚¹æ—¶ï¼Œè¯´æ˜ç¯å·²ç»ç»“æŸäº†
		è¿™ä¸ªå½’çš„è¿‡ç¨‹éå†åˆ°çš„èŠ‚ç‚¹ï¼Œå°±æ˜¯ç¯ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹
æ€è·¯ï¼šå¹¶æŸ¥é›†
	1.ä»»æ„ä¸€æ¡è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¸å±äºåŒä¸€ä¸ªè¿é€šåˆ†é‡æ—¶ï¼Œè¯´æ˜ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹å‰å±äºä¸¤ä¸ªæ ‘
	2.å¦‚æœå±äºåŒä¸€è¿é€šåˆ†é‡ï¼Œåˆ™è¯´æ˜ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹å‰å·²ç»æ˜¯åœ¨åŒåœ¨åŒä¸€ä¸ªæ ‘ä¸­
		å½“å‰è¿™æ¡è¾¹å°±æ˜¯å¤šä½™çš„
*/
// leetcode submit region begin(Prohibit modification and deletion)
func findRedundantConnection(edges [][]int) []int {
	// dfs
	n := len(edges) + 1
	circle, adj, visited := make([]bool, n), make([][]int, n), make([]bool, n)
	for _, e := range edges { // é‚»æ¥è¡¨
		adj[e[0]], adj[e[1]] = append(adj[e[0]], e[1]), append(adj[e[1]], e[0])
	}
	var dfs func(int, int) (int, bool)
	dfs = func(p, c int) (r int, f bool) {
		visited[c] = true // è®°å½•å·²è®¿é—®çš„èŠ‚ç‚¹
		for _, i := range adj[c] {
			if i == p { // pæ˜¯â€œçˆ¶â€èŠ‚ç‚¹
				continue
			}
			if visited[i] { // æ‰¾åˆ°ç¯
				r, f, circle[c] = i, true, true
				return
			}
			r, f = dfs(c, i)
			if f {
				circle[c] = true // è®°å½•ç¯èŠ‚ç‚¹
				break
			}
		}
		if c == r { // ç¯ç»ˆæ­¢
			return 0, false
		}
		return r, f // ä¹Ÿå¯ä»¥åªè¿”å›rï¼Œé€šè¿‡ r>0 åˆ¤æ–­æ˜¯å¦åœ¨ç¯ä¸­
	}
	dfs(0, 1)
	for i := n - 2; i >= 0; i-- {
		if circle[edges[i][0]] && circle[edges[i][1]] { // ä¸¤ä¸ªèŠ‚ç‚¹éƒ½åœ¨ç¯ä¸­
			return edges[i]
		}
	}
	return nil

	// å¹¶æŸ¥é›†
	//n := len(edges)
	//uni := make([]int, n+1)
	//var find func(int) int
	//find = func(p int) int {
	//	if p == uni[p] {
	//		return p
	//	}
	//	for uni[p] != uni[uni[p]] { // è¿™ç§å†™æ³•æ²¡æœ‰å›æº¯åŠŸèƒ½
	//		uni[p] = uni[uni[p]]
	//	}
	//	//if p != uni[p] {
	//	//	uni[p] = find(uni[p])
	//	//}
	//	return uni[p]
	//}
	//union := func(p, q int) bool {
	//	rootP, rootQ := find(p), find(q)
	//	if rootP == rootQ { // ç¯å‡ºç°äº†
	//		return false
	//	}
	//	uni[rootQ] = rootP // åˆå¹¶ä¸¤æ£µæ ‘
	//	return true
	//}
	//for i := 1; i <= n; i++ {
	//	uni[i] = i
	//}
	//for i := 0; i < n; i++ {
	//	if !union(edges[i][0], edges[i][1]) {
	//		return edges[i]
	//	}
	//	//fmt.Println(uni)
	//}
	//return nil
}

/*
ä¸¤ç§å†™æ³•çš„è¿‡ç¨‹å˜åŒ–æ˜¯ä¸€æ ·

è¿­ä»£å†™æ³•
	[0 1 2 3 4 5 6 2 8 9 10]
	[0 1 2 3 4 5 6 2 2 9 10]
	[0 1 2 3 4 5 3 2 2 9 10]
	[0 1 2 3 4 2 3 2 2 9 10]
	[0 1 3 3 4 2 3 2 2 9 10]
	[0 1 3 4 4 2 3 2 3 9 10]
é€’å½’å†™æ³•
	[0 1 2 3 4 5 6 2 8 9 10]
	[0 1 2 3 4 5 6 2 2 9 10]
	[0 1 2 3 4 5 3 2 2 9 10]
	[0 1 2 3 4 2 3 2 2 9 10]
	[0 1 3 3 4 2 3 2 2 9 10]
	[0 1 3 4 4 2 3 2 3 9 10]
*/
//leetcode submit region end(Prohibit modification and deletion)
