//æœ‰ä¸€åªè·³èš¤çš„å®¶åœ¨æ•°è½´ä¸Šçš„ä½ç½® x å¤„ã€‚è¯·ä½ å¸®åŠ©å®ƒä»ä½ç½® 0 å‡ºå‘ï¼Œåˆ°è¾¾å®ƒçš„å®¶ã€‚
//
// è·³èš¤è·³è·ƒçš„è§„åˆ™å¦‚ä¸‹ï¼š
//
//
// å®ƒå¯ä»¥ å¾€å‰ è·³æ°å¥½ a ä¸ªä½ç½®ï¼ˆå³å¾€å³è·³ï¼‰ã€‚
// å®ƒå¯ä»¥ å¾€å è·³æ°å¥½ b ä¸ªä½ç½®ï¼ˆå³å¾€å·¦è·³ï¼‰ã€‚
// å®ƒä¸èƒ½ è¿ç»­ å¾€åè·³ 2 æ¬¡ã€‚
// å®ƒä¸èƒ½è·³åˆ°ä»»ä½• forbidden æ•°ç»„ä¸­çš„ä½ç½®ã€‚
//
//
// è·³èš¤å¯ä»¥å¾€å‰è·³ è¶…è¿‡ å®ƒçš„å®¶çš„ä½ç½®ï¼Œä½†æ˜¯å®ƒ ä¸èƒ½è·³åˆ°è´Ÿæ•´æ•° çš„ä½ç½®ã€‚
//
// ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ forbidden ï¼Œå…¶ä¸­ forbidden[i] æ˜¯è·³èš¤ä¸èƒ½è·³åˆ°çš„ä½ç½®ï¼ŒåŒæ—¶ç»™ä½ æ•´æ•° aï¼Œ b å’Œ x ï¼Œè¯·ä½ è¿”å›è·³èš¤åˆ°å®¶çš„æœ€å°‘è·³è·ƒ
//æ¬¡æ•°ã€‚å¦‚æœæ²¡æœ‰æ°å¥½åˆ°è¾¾ x çš„å¯è¡Œæ–¹æ¡ˆï¼Œè¯·ä½ è¿”å› -1 ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šforbidden = [14,4,18,1,15], a = 3, b = 15, x = 9
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šå¾€å‰è·³ 3 æ¬¡ï¼ˆ0 -> 3 -> 6 -> 9ï¼‰ï¼Œè·³èš¤å°±åˆ°å®¶äº†ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šforbidden = [8,3,16,6,12,20], a = 15, b = 13, x = 11
//è¾“å‡ºï¼š-1
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//è¾“å…¥ï¼šforbidden = [1,6,2,14,5,17,4], a = 16, b = 9, x = 7
//è¾“å‡ºï¼š2
//è§£é‡Šï¼šå¾€å‰è·³ä¸€æ¬¡ï¼ˆ0 -> 16ï¼‰ï¼Œç„¶åå¾€å›è·³ä¸€æ¬¡ï¼ˆ16 -> 7ï¼‰ï¼Œè·³èš¤å°±åˆ°å®¶äº†ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= forbidden.length <= 1000
// 1 <= a, b, forbidden[i] <= 2000
// 0 <= x <= 2000
// forbidden ä¸­æ‰€æœ‰ä½ç½®äº’ä¸ç›¸åŒã€‚
// ä½ç½® x ä¸åœ¨ forbidden ä¸­ã€‚
//
//
// Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ æ•°ç»„ åŠ¨æ€è§„åˆ’ ğŸ‘ 81 ğŸ‘ 0

package main

import (
	"container/heap"
	"fmt"
)

func main() {
	forbidden := []int{162, 118, 178, 152, 167, 100, 40, 74, 199, 186, 26, 73, 200, 127, 30, 124, 193, 84, 184, 36, 103, 149, 153, 9, 54, 154, 133, 95, 45, 198, 79, 157, 64, 122, 59, 71, 48, 177, 82, 35, 14, 176, 16, 108, 111, 6, 168, 31, 134, 164, 136, 72, 98}
	a, b, x := 29, 98, 80
	jumps := minimumJumps(forbidden, a, b, x)
	fmt.Println(jumps)
}

/*
æ€è·¯ï¼šbfs
	1.é€šè¿‡æœç´¢ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šèƒ½ä¸èƒ½è·³åˆ° x ä½ç½®ï¼Œæœç´¢çš„å·¦åŒºé—´æ˜¯ 0ï¼Œå³åŒºé—´æ˜¯å¤šå°‘å‘¢ï¼Ÿ
		å‰è·³æ¬¡æ•°å¿…ç„¶æ˜¯ >= åè·³æ¬¡æ•°çš„ï¼Œå¯ä»¥åˆ†3ç§æƒ…å†µè®¨è®ºå³åŒºé—´
		å½“ a>bï¼šæ­¤æ—¶è·³èš¤åªä¼šå‰è¿›ï¼ˆæ­£æ–¹å‘ï¼‰ï¼Œä¸ä¼šåé€€ï¼Œæ‰€ä»¥å³åŒºé—´æ˜¯ x+bï¼ˆè¶…è¿‡ x åï¼Œå¯ä»¥å›è·³ä¸€æ¬¡ï¼‰
		å½“ a=bï¼šæ­¤æ—¶åè·³å·²ç»æ²¡æœ‰æ„ä¹‰ï¼Œå³åŒºé—´æ˜¯ x
		å½“ a<bï¼šå³åŒºé—´ä¸º max(max(forbidden)+a+b, x)ï¼Œè¯æ˜è¿‡ç¨‹è¾ƒå¤æ‚ï¼Œè¯·å‚è€ƒLeetCode
	2.Dijkstra
		cache è®°å½•éšœç¢ç‚¹ï¼Œvisited è®°å½•å·²ç»è·³è¿‡çš„ç‚¹ï¼Œmj è®°å½•å½“å‰è·³çš„æ–¹å‘ã€ç‚¹ã€æ¬¡æ•°
		æ¯æ¬¡å–å‡ºå½“å‰è·³çš„æœ€å°æ¬¡æ•°çš„ç‚¹ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦èƒ½å³è·³/å·¦è·³
		æœ€å…ˆè·³åˆ° x çš„æƒ…å†µï¼Œç”¨çš„æ¬¡æ•°æœ€å°
*/
// leetcode submit region begin(Prohibit modification and deletion)
func minimumJumps(forbidden []int, a int, b int, x int) int {
	// Dijkstra
	maxVal := func(a, b int) int {
		if a > b {
			return a
		}
		return b
	}
	max, visited, cache := 0, make(map[int]bool), make(map[int]struct{}, len(forbidden))
	for _, v := range forbidden {
		max = maxVal(max, v)
		cache[v] = struct{}{} // forbidden çš„ä½ç½®
	}
	max = maxVal(max+a, x) + b // å³è¾¹ç•Œï¼šæœ€æ ¸å¿ƒé€»è¾‘
	h := &mj{{}}               // åˆå§‹ä½ç½®èµ·è·³
	for h.Len() > 0 {
		p := heap.Pop(h).([3]int) // å †é¡¶
		if p[1] == x {            // æˆåŠŸ
			return p[2]
		}
		nrp := p[1] + a // å³è·³
		if _, ok := cache[nrp]; !ok && nrp <= max && !visited[nrp] {
			heap.Push(h, [3]int{1, nrp, p[2] + 1})
			visited[nrp] = true // å·²å‘å³è·³è¿‡
		}
		if p[0] == 0 { // ä¸èƒ½è¿ç»­å·¦è·³
			continue
		}
		nlp := p[1] - b // å·¦è·³
		if _, ok := cache[nlp]; !ok && nlp > 0 && !visited[nlp] {
			heap.Push(h, [3]int{0, nlp, p[2] + 1})
			visited[-nlp] = true // å·²å‘å·¦è·³è¿‡
		}
	}
	return -1
}

type mj [][3]int

func (m mj) Len() int           { return len(m) }
func (m mj) Less(i, j int) bool { return m[i][2] < m[j][2] }
func (m mj) Swap(i, j int)      { m[i], m[j] = m[j], m[i] }
func (m *mj) Push(x any)        { *m = append(*m, x.([3]int)) }
func (m *mj) Pop() any {
	v := (*m)[len(*m)-1]
	*m = (*m)[:len(*m)-1]
	return v
}

//leetcode submit region end(Prohibit modification and deletion)
