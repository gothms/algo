//å°æ‰£åœ¨ç§‹æ—¥å¸‚é›†å…¥å£å¤„å‘ç°äº†ä¸€ä¸ªæ•°å­—æ¸¸æˆã€‚ä¸»åŠæ–¹å…±æœ‰ `N` ä¸ªè®¡æ•°å™¨ï¼Œè®¡æ•°å™¨ç¼–å·ä¸º `0 ~ N-1`ã€‚æ¯ä¸ªè®¡æ•°å™¨ä¸Šåˆ†åˆ«æ˜¾ç¤ºäº†ä¸€ä¸ªæ•°å­—ï¼Œå°æ‰£æŒ‰è®¡æ•°å™¨ç¼–å·å‡åº
//å°†æ‰€æ˜¾ç¤ºçš„æ•°å­—è®°äºæ•°ç»„ `nums`ã€‚æ¯ä¸ªè®¡æ•°å™¨ä¸Šæœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«å¯ä»¥å®ç°å°†æ˜¾ç¤ºæ•°å­—åŠ ä¸€æˆ–å‡ä¸€ã€‚å°æ‰£æ¯ä¸€æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©ä¸€ä¸ªè®¡æ•°å™¨ï¼ŒæŒ‰ä¸‹åŠ ä¸€æˆ–å‡ä¸€æŒ‰é’®ã€‚
//
//ä¸»åŠæ–¹è¯·å°æ‰£å›ç­”å‡ºä¸€ä¸ªé•¿åº¦ä¸º `N` çš„æ•°ç»„ï¼Œç¬¬ `i` ä¸ªå…ƒç´ (0 <= i < N)è¡¨ç¤ºå°† `0~i` å·è®¡æ•°å™¨ **åˆå§‹** æ‰€ç¤ºæ•°å­—æ“ä½œæˆæ»¡è¶³æ‰€æœ‰æ¡
//ä»¶ `nums[a]+1 == nums[a+1],(0 <= a < i)` çš„æœ€å°æ“ä½œæ•°ã€‚å›ç­”æ­£ç¡®æ–¹å¯è¿›å…¥ç§‹æ—¥å¸‚é›†ã€‚
//
//ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¯·å°†æ¯ä¸ªæœ€å°æ“ä½œæ•°å¯¹ `1,000,000,007` å–ä½™ã€‚
//
//**ç¤ºä¾‹ 1ï¼š**
//
//> è¾“å…¥ï¼š`nums = [3,4,5,1,6,7]`
//>
//> è¾“å‡ºï¼š`[0,0,0,5,6,7]`
//>
//> è§£é‡Šï¼š
//> i = 0ï¼Œ[3] æ— éœ€æ“ä½œ
//> i = 1ï¼Œ[3,4] æ— éœ€æ“ä½œï¼›
//> i = 2ï¼Œ[3,4,5] æ— éœ€æ“ä½œï¼›
//> i = 3ï¼Œå°† [3,4,5,1] æ“ä½œæˆ [3,4,5,6], æœ€å°‘ 5 æ¬¡æ“ä½œï¼›
//> i = 4ï¼Œå°† [3,4,5,1,6] æ“ä½œæˆ [3,4,5,6,7], æœ€å°‘ 6 æ¬¡æ“ä½œï¼›
//> i = 5ï¼Œå°† [3,4,5,1,6,7] æ“ä½œæˆ [3,4,5,6,7,8]ï¼Œæœ€å°‘ 7 æ¬¡æ“ä½œï¼›
//> è¿”å› [0,0,0,5,6,7]ã€‚
//
//**ç¤ºä¾‹ 2ï¼š**
//
//> è¾“å…¥ï¼š`nums = [1,2,3,4,5]`
//>
//> è¾“å‡ºï¼š`[0,0,0,0,0]`
//>
//> è§£é‡Šï¼šå¯¹äºä»»æ„è®¡æ•°å™¨ç¼–å· i éƒ½æ— éœ€æ“ä½œã€‚
//
//**ç¤ºä¾‹ 3ï¼š**
//
//> è¾“å…¥ï¼š`nums = [1,1,1,2,3,4]`
//>
//> è¾“å‡ºï¼š`[0,1,2,3,3,3]`
//>
//> è§£é‡Šï¼š
//> i = 0ï¼Œæ— éœ€æ“ä½œï¼›
//> i = 1ï¼Œå°† [1,1] æ“ä½œæˆ [1,2] æˆ– [0,1] æœ€å°‘ 1 æ¬¡æ“ä½œï¼›
//> i = 2ï¼Œå°† [1,1,1] æ“ä½œæˆ [1,2,3] æˆ– [0,1,2]ï¼Œæœ€å°‘ 2 æ¬¡æ“ä½œï¼›
//> i = 3ï¼Œå°† [1,1,1,2] æ“ä½œæˆ [1,2,3,4] æˆ– [0,1,2,3]ï¼Œæœ€å°‘ 3 æ¬¡æ“ä½œï¼›
//> i = 4ï¼Œå°† [1,1,1,2,3] æ“ä½œæˆ [-1,0,1,2,3]ï¼Œæœ€å°‘ 3 æ¬¡æ“ä½œï¼›
//> i = 5ï¼Œå°† [1,1,1,2,3,4] æ“ä½œæˆ [-1,0,1,2,3,4]ï¼Œæœ€å°‘ 3 æ¬¡æ“ä½œï¼›
//> è¿”å› [0,1,2,3,3,3]ã€‚
//
//**æç¤ºï¼š**
//- `1 <= nums.length <= 10^5`
//- `1 <= nums[i] <= 10^3`
//
// Related Topics æ•°ç»„ æ•°å­¦ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ ğŸ‘ 28 ğŸ‘ 0

package main

import (
	"container/heap"
	"fmt"
	"sort"
)

func main() {
	nums := []int{471, 626, 848, 957, 788, 138, 982, 721, 729, 956, 432, 1000, 478, 353, 586, 544, 304, 811, 359, 535, 992, 684, 606, 39, 384, 799, 120, 608, 540, 914, 19, 62, 410, 711, 449, 370, 263, 890, 124, 516, 861, 936, 729, 595, 768, 929, 649, 803, 65, 692, 548, 620, 871, 785, 15, 629, 251, 764, 973, 484, 172, 923, 859, 29, 297, 215, 436, 74, 762, 885, 272, 504, 307, 998, 83, 329, 520, 889, 584, 496, 443, 802, 180, 322, 640, 290, 292, 403, 11, 230, 743, 183, 600, 741, 558, 780, 970, 777, 288}
	game := numsGame(nums) // [0,154,375,704,704,1355,1547,1617,1617,1843,2142,2410,2665,3046,3188,3373,3710,3879,4163,4272,4619,4657,4698,5307,5531,5721,6211,6214,6283,6587,7179,7729,7923,8029,8186,8423,8725,9049,9492,9544,9836,10202,10317,10337,10489,10801,10823,10998,11562,11624,11707,11719,11957,12108,12728,12735,13114,13247,13581,13737,14199,14487,14703,15318,15659,16083,16285,16850,16972,17216,17586,17725,18059,18415,18975,19290,19398,19658,19704,19839,20005,20197,20628,20918,20945,21269,21579,21779,22368,22739,22880,23300,23300,23440,23484,23661,24023,24191,24513]
	fmt.Println(game)
}

// leetcode submit region begin(Prohibit modification and deletion)
func numsGame(nums []int) []int {
	// ä¸­ä½æ•°
	const mod int64 = 1_000_000_007
	ret, hMax, hMin := make([]int, len(nums)), &nGHP{}, &nGHP{}
	var maxSum, minSum int64
	for i, val := range nums {
		v := val - i
		if l := hMin.Len(); l == 0 || v >= hMin.IntSlice[0] { // ä¼˜å…ˆå°é¡¶å †
			heap.Push(hMin, v)
			minSum += int64(v)
			if l > hMax.Len() { // è°ƒæ•´
				t := heap.Pop(hMin).(int)
				minSum -= int64(t)
				maxSum += int64(t)
				heap.Push(hMax, -t)
			}
		} else { // å¤§é¡¶å †
			heap.Push(hMax, -v) // push è´Ÿå€¼
			maxSum += int64(v)
			if hMax.Len() > l {
				t := -heap.Pop(hMax).(int)
				maxSum -= int64(t)
				minSum += int64(t)
				heap.Push(hMin, t)
			}
		}
		if i&1 == 0 { // æ“ä½œæ¬¡æ•°çš„ç®—æ³•
			ret[i] = int((minSum - maxSum - int64(hMin.IntSlice[0])) % mod)
		} else {
			ret[i] = int((minSum - maxSum) % mod)
		}
	}
	return ret
}

type nGHP struct {
	sort.IntSlice
}

func (n *nGHP) Push(x any) {
	n.IntSlice = append(n.IntSlice, x.(int))
}

func (n *nGHP) Pop() any {
	v := n.IntSlice[len(n.IntSlice)-1]
	n.IntSlice = n.IntSlice[:len(n.IntSlice)-1]
	return v
}

//leetcode submit region end(Prohibit modification and deletion)
